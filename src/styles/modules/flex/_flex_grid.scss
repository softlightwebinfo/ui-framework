.softFlexGrid {
  display: flex;
  flex-wrap: wrap;
  margin-bottom: 0;

  > .softFlexItem {
    flex-grow: 0;

    &.softFlexItem--flexGrowZero {
      // sass-lint:disable-block no-important
      flex-grow: 0 !important;
      flex-basis: auto !important;
    }
  }
}

$gutterTypes: (
  gutterSmall: $softSizeS,
  gutterMedium: $softSize,
  gutterLarge: $softSizeL,
  gutterXLarge: $softSizeXL,
);

$fractions: (
  fourths: 25%,
  thirds: 33.3%,
  halves: 50%,
  single: 100%,
);

@each $gutterName, $gutterSize in $gutterTypes {
  $halfGutterSize: $gutterSize * .5;

  /**
   * Uncouple the gutter margin from the column widths to support cases where we use a FlexGrid
   * without columns.
   */
  .softFlexGrid--#{$gutterName} {
    margin: -$halfGutterSize;
    align-items: stretch;

    > .softFlexItem {
      margin: $halfGutterSize;
    }
  }

  @each $fraction, $percentage in $fractions {
    .softFlexGrid--#{$gutterName}.softFlexGrid--#{$fraction} {
      > .softFlexItem {
        flex-basis: calc(#{$percentage} - #{$gutterSize});
      }
    }
  }
}

@include softBreakpoint('xs', 's') {
  .softFlexGrid {
    // sass-lint:disable-block no-important
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
}
